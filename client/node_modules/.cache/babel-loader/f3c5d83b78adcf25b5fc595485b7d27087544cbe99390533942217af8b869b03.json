{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../../contexts/authContext\";\nexport const useCreatePostMutation = () => {\n  _s();\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const uploadPostImg = async file => {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    const res = await request.post('/upload/post/', formData);\n    return res.data;\n  };\n  const createPost = async _ref => {\n    let {\n      data\n    } = _ref;\n    const {\n      post_img\n    } = data;\n    const fileUrl = post_img && post_img[0] ? await uploadPostImg(post_img[0]) : '';\n    const newPost = {\n      ...data,\n      author_id: currentUser.id,\n      file: fileUrl\n    };\n    return await request.post('/post', newPost);\n  };\n  return createMutation = useMutation(data => createPost({\n    data\n  }), {\n    onSuccess: () => {\n      queryClient.invalidateQueries(['homePosts']);\n      queryClient.invalidateQueries(['profilePosts']);\n    }\n  });\n};\n_s(useCreatePostMutation, \"QQqI0D2bMsqj9A4+d24/jCkrvPc=\", true);","map":{"version":3,"names":["useContext","AuthContext","useCreatePostMutation","currentUser","uploadPostImg","file","formData","FormData","append","res","request","post","data","createPost","post_img","fileUrl","newPost","author_id","id","createMutation","useMutation","onSuccess","queryClient","invalidateQueries"],"sources":["C:/Users/mathe/OneDrive/Documentos/vsc/fwitter/client/src/containers/hooks/useCreatePostMutation.js"],"sourcesContent":["import { useContext } from \"react\";\r\nimport { AuthContext } from \"../../contexts/authContext\";\r\n\r\nexport const useCreatePostMutation = () => {\r\n    const { currentUser } = useContext(AuthContext);\r\n\r\n    const uploadPostImg = async (file) => {\r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n        const res = await request.post('/upload/post/', formData);\r\n        return res.data;\r\n    }\r\n\r\n    const createPost = async ({ data }) => {\r\n        const { post_img } = data;\r\n        const fileUrl = post_img && post_img[0] ? \r\n            await uploadPostImg(post_img[0]) : '';\r\n        const newPost = {\r\n            ...data,\r\n            author_id: currentUser.id,\r\n            file: fileUrl\r\n        }\r\n        return await request.post('/post', newPost);\r\n    }\r\n    \r\n    return createMutation = useMutation(\r\n        data => createPost({ data }), \r\n        {\r\n            onSuccess: () => {\r\n                queryClient.invalidateQueries(['homePosts']);\r\n                queryClient.invalidateQueries(['profilePosts']);\r\n            }\r\n    });\r\n}"],"mappings":";AAAA,SAASA,UAAU,QAAQ,OAAO;AAClC,SAASC,WAAW,QAAQ,4BAA4B;AAExD,OAAO,MAAMC,qBAAqB,GAAG,MAAM;EAAA;EACvC,MAAM;IAAEC;EAAY,CAAC,GAAGH,UAAU,CAACC,WAAW,CAAC;EAE/C,MAAMG,aAAa,GAAG,MAAOC,IAAI,IAAK;IAClC,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEH,IAAI,CAAC;IAC7B,MAAMI,GAAG,GAAG,MAAMC,OAAO,CAACC,IAAI,CAAC,eAAe,EAAEL,QAAQ,CAAC;IACzD,OAAOG,GAAG,CAACG,IAAI;EACnB,CAAC;EAED,MAAMC,UAAU,GAAG,cAAoB;IAAA,IAAb;MAAED;IAAK,CAAC;IAC9B,MAAM;MAAEE;IAAS,CAAC,GAAGF,IAAI;IACzB,MAAMG,OAAO,GAAGD,QAAQ,IAAIA,QAAQ,CAAC,CAAC,CAAC,GACnC,MAAMV,aAAa,CAACU,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;IACzC,MAAME,OAAO,GAAG;MACZ,GAAGJ,IAAI;MACPK,SAAS,EAAEd,WAAW,CAACe,EAAE;MACzBb,IAAI,EAAEU;IACV,CAAC;IACD,OAAO,MAAML,OAAO,CAACC,IAAI,CAAC,OAAO,EAAEK,OAAO,CAAC;EAC/C,CAAC;EAED,OAAOG,cAAc,GAAGC,WAAW,CAC/BR,IAAI,IAAIC,UAAU,CAAC;IAAED;EAAK,CAAC,CAAC,EAC5B;IACIS,SAAS,EAAE,MAAM;MACbC,WAAW,CAACC,iBAAiB,CAAC,CAAC,WAAW,CAAC,CAAC;MAC5CD,WAAW,CAACC,iBAAiB,CAAC,CAAC,cAAc,CAAC,CAAC;IACnD;EACR,CAAC,CAAC;AACN,CAAC;AAAA,GA9BYrB,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}