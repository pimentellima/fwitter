{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../../contexts/authContext\";\nimport { request } from \"../../utils/axios\";\nexport const useFollow = () => {\n  _s();\n  const queryClient = useQueryClient();\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const {\n    data\n  } = useQuery(['follow'], user => request.get('/follow', {\n    params: {\n      followed_user_id: user.id\n    }\n  }).then(res => res.data.filter(follower => follower.follower_user_id === currentUser.id).length), {\n    enabled: !!user\n  });\n  const followMutation = useMutation(user => request.delete('/follow', {\n    data: {\n      follower_user_id: currentUser.id,\n      followed_user_id: user.id\n    }\n  }), {\n    onSuccess: () => {\n      queryClient.invalidateQueries(['follow']);\n    }\n  });\n  const unfollowMutation = useMutation(user => request.post('/follow', {\n    follower_user_id: currentUser.id,\n    followed_user_id: user.id\n  }), {\n    onSuccess: () => {\n      queryClient.invalidateQueries(['follow']);\n    }\n  });\n  return {\n    isFollowed: data,\n    unfollow: user => unfollowMutation.mutate(user),\n    follow: user => followMutation.mutate(user)\n  };\n};\n_s(useFollow, \"gwdHFxcPD04HBthaG4Vp+eidcCc=\", true, function () {\n  return [useQueryClient, useQuery];\n});","map":{"version":3,"names":["useQuery","useQueryClient","useContext","AuthContext","request","useFollow","queryClient","currentUser","data","user","get","params","followed_user_id","id","then","res","filter","follower","follower_user_id","length","enabled","followMutation","useMutation","delete","onSuccess","invalidateQueries","unfollowMutation","post","isFollowed","unfollow","mutate","follow"],"sources":["C:/Users/mathe/OneDrive/Documentos/vsc/fwitter/client/src/containers/profile/useFollow.js"],"sourcesContent":["import { useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useContext } from \"react\";\r\nimport { AuthContext } from \"../../contexts/authContext\";\r\nimport { request } from \"../../utils/axios\";\r\n\r\nexport const useFollow = () => {\r\n    const queryClient = useQueryClient();\r\n    const { currentUser } = useContext(AuthContext);\r\n\r\n    const { data } = useQuery(['follow'], (user) => \r\n        request.get('/follow', {\r\n            params: {\r\n                followed_user_id: user.id\r\n            }\r\n        }).then(res => res.data.filter(\r\n            follower => follower.follower_user_id === currentUser.id).length\r\n        ), {\r\n            enabled: !!user\r\n        })\r\n    \r\n    const followMutation = useMutation(\r\n        (user) => request.delete('/follow', {\r\n            data: {\r\n                follower_user_id: currentUser.id,\r\n                followed_user_id: user.id\r\n            }\r\n        }), {\r\n            onSuccess: () => {\r\n                queryClient.invalidateQueries(['follow'])\r\n            }\r\n        }\r\n    );\r\n\r\n    const unfollowMutation = useMutation(\r\n        (user) => request.post('/follow', {\r\n            follower_user_id: currentUser.id,\r\n            followed_user_id: user.id\r\n        }), {\r\n            onSuccess: () => {\r\n                queryClient.invalidateQueries(['follow'])\r\n            }\r\n        }\r\n    );\r\n\r\n    return { \r\n        isFollowed: data, \r\n        unfollow: (user) => unfollowMutation.mutate(user),\r\n        follow: (user) => followMutation.mutate(user)\r\n     }\r\n\r\n}"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,cAAc,QAAQ,uBAAuB;AAChE,SAASC,UAAU,QAAQ,OAAO;AAClC,SAASC,WAAW,QAAQ,4BAA4B;AACxD,SAASC,OAAO,QAAQ,mBAAmB;AAE3C,OAAO,MAAMC,SAAS,GAAG,MAAM;EAAA;EAC3B,MAAMC,WAAW,GAAGL,cAAc,EAAE;EACpC,MAAM;IAAEM;EAAY,CAAC,GAAGL,UAAU,CAACC,WAAW,CAAC;EAE/C,MAAM;IAAEK;EAAK,CAAC,GAAGR,QAAQ,CAAC,CAAC,QAAQ,CAAC,EAAGS,IAAI,IACvCL,OAAO,CAACM,GAAG,CAAC,SAAS,EAAE;IACnBC,MAAM,EAAE;MACJC,gBAAgB,EAAEH,IAAI,CAACI;IAC3B;EACJ,CAAC,CAAC,CAACC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACP,IAAI,CAACQ,MAAM,CAC1BC,QAAQ,IAAIA,QAAQ,CAACC,gBAAgB,KAAKX,WAAW,CAACM,EAAE,CAAC,CAACM,MAAM,CACnE,EAAE;IACCC,OAAO,EAAE,CAAC,CAACX;EACf,CAAC,CAAC;EAEN,MAAMY,cAAc,GAAGC,WAAW,CAC7Bb,IAAI,IAAKL,OAAO,CAACmB,MAAM,CAAC,SAAS,EAAE;IAChCf,IAAI,EAAE;MACFU,gBAAgB,EAAEX,WAAW,CAACM,EAAE;MAChCD,gBAAgB,EAAEH,IAAI,CAACI;IAC3B;EACJ,CAAC,CAAC,EAAE;IACAW,SAAS,EAAE,MAAM;MACblB,WAAW,CAACmB,iBAAiB,CAAC,CAAC,QAAQ,CAAC,CAAC;IAC7C;EACJ,CAAC,CACJ;EAED,MAAMC,gBAAgB,GAAGJ,WAAW,CAC/Bb,IAAI,IAAKL,OAAO,CAACuB,IAAI,CAAC,SAAS,EAAE;IAC9BT,gBAAgB,EAAEX,WAAW,CAACM,EAAE;IAChCD,gBAAgB,EAAEH,IAAI,CAACI;EAC3B,CAAC,CAAC,EAAE;IACAW,SAAS,EAAE,MAAM;MACblB,WAAW,CAACmB,iBAAiB,CAAC,CAAC,QAAQ,CAAC,CAAC;IAC7C;EACJ,CAAC,CACJ;EAED,OAAO;IACHG,UAAU,EAAEpB,IAAI;IAChBqB,QAAQ,EAAGpB,IAAI,IAAKiB,gBAAgB,CAACI,MAAM,CAACrB,IAAI,CAAC;IACjDsB,MAAM,EAAGtB,IAAI,IAAKY,cAAc,CAACS,MAAM,CAACrB,IAAI;EAC/C,CAAC;AAEN,CAAC;AAAA,GA7CYJ,SAAS;EAAA,QACEJ,cAAc,EAGjBD,QAAQ;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}