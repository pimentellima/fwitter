{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$();\nimport axios from 'axios';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport moment from 'moment';\nconst url = 'http://localhost:5000';\nexport const useUser = id => {\n  _s();\n  return useQuery(['postUser'], async () => {\n    const res = await axios.get(url + '/user/', {\n      params: {\n        id\n      }\n    });\n    return res.data[0];\n  });\n};\n_s(useUser, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n  return [useQuery];\n});\nexport const useLikes = id => {\n  _s2();\n  return useQuery(['postLikes'], {\n    post_id: id\n  }, async () => {\n    const res = await axios.get(url + '/likes', {\n      params: {\n        post_id: id\n      }\n    });\n    return res.data;\n  });\n};\n_s2(useLikes, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n  return [useQuery];\n});\nexport const useComments = id => {\n  _s3();\n  return useQuery(['postComments'], {\n    post_id: id\n  }, async () => {\n    const res = await axios.get(url + '/comments', {\n      params: {\n        post_id: id\n      }\n    });\n    return res.data;\n  });\n};\n_s3(useComments, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n  return [useQuery];\n});\nexport const useDeletePost = () => {\n  _s4();\n  const queryClient = useQueryClient();\n  return useMutation(async id => await axios.delete(url + '/posts', {\n    data: {\n      id\n    }\n  }), {\n    onSuccess: () => {\n      queryClient.invalidateQueries(['posts']);\n      queryClient.invalidateQueries(['profilePosts']);\n    }\n  });\n};\n_s4(useDeletePost, \"YK0wzM21ECnncaq5SECwU+/SVdQ=\", false, function () {\n  return [useQueryClient, useMutation];\n});\nexport const useCreateLike = () => {\n  _s5();\n  const queryClient = useQueryClient();\n  return useMutation(async _ref => {\n    let {\n      post_id,\n      user_id\n    } = _ref;\n    return await axios.post(url + '/likes', {\n      post_id,\n      user_id\n    });\n  }, {\n    onSuccess: () => queryClient.invalidateQueries(['postLike', {\n      post_id\n    }])\n  });\n};\n_s5(useCreateLike, \"YK0wzM21ECnncaq5SECwU+/SVdQ=\", false, function () {\n  return [useQueryClient, useMutation];\n});\nexport const useDeleteLike = () => {\n  _s6();\n  const queryClient = useQueryClient();\n  return useMutation(async _ref2 => {\n    let {\n      post_id,\n      user_id\n    } = _ref2;\n    return await axios.delete(url + '/likes', {\n      data: {\n        post_id,\n        user_id\n      }\n    });\n  }, {\n    onSuccess: () => queryClient.invalidateQueries(['postLike', {\n      post_id\n    }])\n  });\n};\n_s6(useDeleteLike, \"YK0wzM21ECnncaq5SECwU+/SVdQ=\", false, function () {\n  return [useQueryClient, useMutation];\n});\nexport const useCreatePost = async () => {\n  _s7();\n  const queryClient = useQueryClient();\n  return useMutation(async _ref3 => {\n    let {\n      postData,\n      user_id\n    } = _ref3;\n    const {\n      title,\n      description,\n      ingredients,\n      file\n    } = postData;\n    const fileUrl = file[0] ? await uploadImg(file[0]) : '';\n    const postObj = {\n      user_id,\n      title,\n      description,\n      ingredients: JSON.stringify(ingredients),\n      date: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\n      file: fileUrl\n    };\n    return await axios.post(url + '/posts/', postObj);\n  }, {\n    onSuccess: () => queryClient.invalidateQueries(['posts'])\n  });\n};\n_s7(useCreatePost, \"YK0wzM21ECnncaq5SECwU+/SVdQ=\", false, function () {\n  return [useQueryClient, useMutation];\n});","map":{"version":3,"names":["axios","useMutation","useQuery","useQueryClient","moment","url","useUser","id","res","get","params","data","useLikes","post_id","useComments","useDeletePost","queryClient","delete","onSuccess","invalidateQueries","useCreateLike","user_id","post","useDeleteLike","useCreatePost","postData","title","description","ingredients","file","fileUrl","uploadImg","postObj","JSON","stringify","date","format"],"sources":["C:/Users/mathe/OneDrive/Documentos/vsc/fwitter/client/src/containers/post/queries.js"],"sourcesContent":["import axios from 'axios';\r\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport moment from 'moment';\r\n\r\nconst url = 'http://localhost:5000';\r\n\r\nexport const useUser = (id) => {\r\n    return useQuery(['postUser'], async () => {\r\n        const res = await axios.get(url + '/user/', {\r\n            params:{ id }\r\n        })\r\n        return res.data[0];\r\n    })\r\n}\r\n\r\nexport const useLikes = (id) => {\r\n    return useQuery(['postLikes'], { post_id: id }, async () => {\r\n        const res = await axios.get(url + '/likes', {\r\n            params: {\r\n                post_id: id\r\n            }\r\n        });\r\n        return res.data;    \r\n    })\r\n}\r\n\r\nexport const useComments = (id) => {\r\n    return useQuery(['postComments'], { post_id: id }, async () => {\r\n        const res = await axios.get(url + '/comments', {\r\n            params: {\r\n                post_id: id\r\n            }\r\n        }) \r\n        return res.data;\r\n    })\r\n}\r\n\r\nexport const useDeletePost = () => {\r\n    const queryClient = useQueryClient();\r\n    return useMutation(async (id) => \r\n        await axios.delete(url + '/posts', {\r\n            data: { id }\r\n        }), {\r\n            onSuccess: () => {\r\n                queryClient.invalidateQueries(['posts']);\r\n                queryClient.invalidateQueries(['profilePosts']);\r\n            }\r\n        }\r\n    )\r\n}\r\n\r\nexport const useCreateLike = () => {\r\n    const queryClient = useQueryClient();\r\n    return useMutation(async ({ post_id, user_id }) => \r\n        await axios.post(url + '/likes', {\r\n            post_id,\r\n            user_id\r\n        }), {\r\n            onSuccess: () => \r\n                queryClient.invalidateQueries(['postLike', { post_id }])\r\n        }\r\n    )\r\n}\r\n\r\nexport const useDeleteLike = () => {\r\n    const queryClient = useQueryClient();\r\n    return useMutation(async ({ post_id, user_id }) => \r\n        await axios.delete(url + '/likes', {\r\n            data: {\r\n                post_id,\r\n                user_id\r\n        }}), {\r\n            onSuccess: () => \r\n                queryClient.invalidateQueries(['postLike', { post_id }])\r\n        }\r\n    )\r\n}\r\n\r\nexport const useCreatePost = async () => {\r\n    const queryClient = useQueryClient();\r\n    return useMutation(async ({ postData, user_id }) => {\r\n        const { title, description, ingredients, file } = postData;\r\n        const fileUrl = file[0] ? await uploadImg(file[0]) : '';\r\n        const postObj = {\r\n            user_id,\r\n            title,\r\n            description,\r\n            ingredients: JSON.stringify(ingredients),\r\n            date: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\r\n            file: fileUrl\r\n        }\r\n        return await axios.post(url + '/posts/', postObj);\r\n    }, {\r\n        onSuccess: () => queryClient.invalidateQueries(['posts'])\r\n    })\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}